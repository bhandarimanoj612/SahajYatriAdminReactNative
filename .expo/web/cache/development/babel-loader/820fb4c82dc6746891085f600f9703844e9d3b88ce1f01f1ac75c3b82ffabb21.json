{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport axios from \"axios\";\nimport React, { createContext, useEffect, useState } from \"react\";\nimport { BASE_URL } from \"../screens/utils/config\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var AuthContext = createContext();\nexport var AuthProvider = function AuthProvider(_ref) {\n  var children = _ref.children;\n  var _useState = useState(true),\n    _useState2 = _slicedToArray(_useState, 2),\n    isLoading = _useState2[0],\n    setIsLoading = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    userToken = _useState4[0],\n    setUserToken = _useState4[1];\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    userInfo = _useState6[0],\n    setUserInfo = _useState6[1];\n  var _useState7 = useState(null),\n    _useState8 = _slicedToArray(_useState7, 2),\n    userName = _useState8[0],\n    setUserName = _useState8[1];\n  var _useState9 = useState(null),\n    _useState10 = _slicedToArray(_useState9, 2),\n    userImage = _useState10[0],\n    setUserImage = _useState10[1];\n  useEffect(function () {\n    var bootstrapAsync = function () {\n      var _ref2 = _asyncToGenerator(function* () {\n        try {\n          var userInfoData = yield AsyncStorage.getItem(\"userInfo\");\n          var userTokenData = yield AsyncStorage.getItem(\"userToken\");\n          var userNameData = yield AsyncStorage.getItem(\"userName\");\n          var userImageData = yield AsyncStorage.getItem(\"userImageFilePath\");\n          if (userInfoData && userTokenData) {\n            setUserInfo(JSON.parse(userInfoData));\n            setUserToken(userTokenData);\n            setUserName(userNameData);\n            setUserImage(userImageData);\n          }\n        } catch (e) {\n          console.error(\"Error retrieving authentication data: \", e);\n        }\n        setIsLoading(false);\n      });\n      return function bootstrapAsync() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    bootstrapAsync();\n  }, []);\n  var login = function () {\n    var _ref3 = _asyncToGenerator(function* (userName, password) {\n      setIsLoading(true);\n      try {\n        var response = yield axios.post(`${BASE_URL}Auth/login`, {\n          userName: userName,\n          password: password\n        });\n        var userData = response.data;\n        setUserName(userName);\n        setUserInfo(userData);\n        setUserToken(userData.token);\n        yield AsyncStorage.setItem(\"userInfo\", JSON.stringify(userData));\n        yield AsyncStorage.setItem(\"userToken\", userData.token);\n        yield AsyncStorage.setItem(\"userName\", userName);\n      } catch (error) {\n        Alert.alert(\"Login Failed\", error.response.data);\n      } finally {\n        setIsLoading(false);\n      }\n    });\n    return function login(_x, _x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var logout = function () {\n    var _ref4 = _asyncToGenerator(function* () {\n      setIsLoading(true);\n      try {\n        setUserToken(null);\n        setUserInfo(null);\n        setUserName(null);\n        setUserImage(null);\n        yield AsyncStorage.removeItem(\"userInfo\");\n        yield AsyncStorage.removeItem(\"userToken\");\n        yield AsyncStorage.removeItem(\"userName\");\n        yield AsyncStorage.removeItem(\"userImageFilePath\");\n      } catch (error) {\n        console.error(\"Logout failed: \", error);\n      } finally {\n        setIsLoading(false);\n      }\n    });\n    return function logout() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  return _jsx(AuthContext.Provider, {\n    value: {\n      isLoading: isLoading,\n      userToken: userToken,\n      userInfo: userInfo,\n      userName: userName,\n      userImage: userImage,\n      login: login,\n      logout: logout\n    },\n    children: children\n  });\n};","map":{"version":3,"names":["AsyncStorage","axios","React","createContext","useEffect","useState","BASE_URL","Alert","jsx","_jsx","AuthContext","AuthProvider","_ref","children","_useState","_useState2","_slicedToArray","isLoading","setIsLoading","_useState3","_useState4","userToken","setUserToken","_useState5","_useState6","userInfo","setUserInfo","_useState7","_useState8","userName","setUserName","_useState9","_useState10","userImage","setUserImage","bootstrapAsync","_ref2","_asyncToGenerator","userInfoData","getItem","userTokenData","userNameData","userImageData","JSON","parse","e","console","error","apply","arguments","login","_ref3","password","response","post","userData","data","token","setItem","stringify","alert","_x","_x2","logout","_ref4","removeItem","Provider","value"],"sources":["C:/Users/bhand/OneDrive/Desktop/Sahaj Yatri/Frontend/src/Context/AuthContext.js"],"sourcesContent":["import AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport axios from \"axios\";\r\nimport React, { createContext, useEffect, useState } from \"react\";\r\nimport { BASE_URL } from \"../screens/utils/config\";\r\nimport { Alert } from \"react-native\";\r\n\r\nexport const AuthContext = createContext();\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [userToken, setUserToken] = useState(null);\r\n  const [userInfo, setUserInfo] = useState(null);\r\n  const [userName, setUserName] = useState(null);\r\n  const [userImage, setUserImage] = useState(null); // Added userImage state\r\n\r\n  useEffect(() => {\r\n    const bootstrapAsync = async () => {\r\n      try {\r\n        const userInfoData = await AsyncStorage.getItem(\"userInfo\");\r\n        const userTokenData = await AsyncStorage.getItem(\"userToken\");\r\n        const userNameData = await AsyncStorage.getItem(\"userName\");\r\n        const userImageData = await AsyncStorage.getItem(\"userImageFilePath\"); // Fetch user image\r\n\r\n        if (userInfoData && userTokenData) {\r\n          setUserInfo(JSON.parse(userInfoData));\r\n          setUserToken(userTokenData);\r\n          setUserName(userNameData);\r\n          setUserImage(userImageData); // Set user image state\r\n        }\r\n      } catch (e) {\r\n        console.error(\"Error retrieving authentication data: \", e);\r\n      }\r\n      setIsLoading(false);\r\n    };\r\n\r\n    bootstrapAsync();\r\n  }, []);\r\n\r\n  const login = async (userName, password) => {\r\n    setIsLoading(true);\r\n    try {\r\n      const response = await axios.post(`${BASE_URL}Auth/login`, {\r\n        userName,\r\n        password,\r\n      });\r\n      const userData = response.data;\r\n      setUserName(userName);\r\n      setUserInfo(userData);\r\n      setUserToken(userData.token);\r\n      await AsyncStorage.setItem(\"userInfo\", JSON.stringify(userData));\r\n      await AsyncStorage.setItem(\"userToken\", userData.token);\r\n      await AsyncStorage.setItem(\"userName\", userName);\r\n    } catch (error) {\r\n      Alert.alert(\"Login Failed\", error.response.data);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const logout = async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      setUserToken(null);\r\n      setUserInfo(null);\r\n      setUserName(null);\r\n      setUserImage(null); // Set user image state to null\r\n      await AsyncStorage.removeItem(\"userInfo\");\r\n      await AsyncStorage.removeItem(\"userToken\");\r\n      await AsyncStorage.removeItem(\"userName\");\r\n      await AsyncStorage.removeItem(\"userImageFilePath\");\r\n    } catch (error) {\r\n      console.error(\"Logout failed: \", error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        isLoading,\r\n        userToken,\r\n        userInfo,\r\n        userName,\r\n        userImage, // Pass userImage state to context value\r\n        login,\r\n        logout,\r\n      }}\r\n    >\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}