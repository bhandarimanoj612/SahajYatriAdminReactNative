{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { NativeWindStyleSheet as _NativeWindStyleSheet } from \"nativewind\";\nimport { StyledComponent as _StyledComponent } from \"nativewind\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { useContext, useEffect, useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { VictoryPie } from \"victory-native\";\nimport axios from \"axios\";\nimport { BASE_URL } from \"../utils/config\";\nimport { AuthContext } from \"../../Context/AuthContext\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar CategoryChart = function CategoryChart(_ref) {\n  var email = _ref.email;\n  var _useContext = useContext(AuthContext),\n    userInfo = _useContext.userInfo;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    tripData = _useState2[0],\n    setTripData = _useState2[1];\n  var defaultGraphicData = [{\n    y: 0\n  }, {\n    y: 0\n  }, {\n    y: 100\n  }];\n  useEffect(function () {\n    fetchTripData();\n  }, []);\n  var fetchTripData = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      try {\n        var response = yield axios.get(`${BASE_URL}BudgetTrip/user/${userInfo.email}`);\n        setTripData(response.data);\n      } catch (error) {\n        console.error(\"Error fetching trip data:\", error);\n      }\n    });\n    return function fetchTripData() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var chartData = tripData.map(function (trip) {\n    return {\n      x: trip.city,\n      y: 20\n    };\n  });\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    selectedCategory = _useState4[0],\n    setSelectedCategory = _useState4[1];\n  var SIZES = {\n    width: 470\n  };\n  var colorScales = [\"#7DB9DE\", \"#FECB52\", \"#83D3C9\", \"#F58A5E\", \"#BFD7EA\", \"#F4C7AB\", \"#D2FFF7\", \"#E4FFCF\", \"#FFD3D3\", \"#EAD4FF\", \"#A5FFD6\", \"#FFD700\", \"#FF7F50\", \"#ADFF2F\", \"#87CEEB\", \"#FF69B4\", \"#20B2AA\", \"#FFA07A\", \"#00CED1\", \"#FF6347\"];\n  return _jsx(ScrollView, {\n    children: _jsxs(View, {\n      style: styles.container,\n      children: [_jsx(_StyledComponent, {\n        className: \"flex flex-row \",\n        component: View\n      }), _jsx(_StyledComponent, {\n        className: \" m-4\",\n        component: View,\n        children: _jsx(View, {\n          children: _jsx(VictoryPie, {\n            animate: {\n              duration: 4000,\n              easing: \"exp\"\n            },\n            data: chartData,\n            labels: function labels(_ref3) {\n              var datum = _ref3.datum;\n              return `${datum.x}`;\n            },\n            radius: function radius(_ref4) {\n              var datum = _ref4.datum;\n              return selectedCategory === datum.x ? SIZES.width * 0.4 : SIZES.width * 0.4 - 10;\n            },\n            innerRadius: 70,\n            labelRadius: function labelRadius(_ref5) {\n              var innerRadius = _ref5.innerRadius;\n              return (SIZES.width * 0.4 + innerRadius) / 2.5;\n            },\n            style: {\n              labels: {\n                fill: \"black\",\n                fontSize: 12,\n                fontStyle: \"italic\"\n              },\n              parent: _objectSpread({}, styles.shadow)\n            },\n            width: SIZES.width,\n            height: SIZES.width,\n            colorScale: colorScales,\n            events: [{\n              target: \"data\",\n              eventHandlers: {\n                onPress: function onPress() {\n                  return [{\n                    target: \"labels\",\n                    mutation: function mutation(props) {\n                      var categoryName = chartData[props.index].x;\n                      setSelectedCategory(categoryName);\n                    }\n                  }];\n                }\n              }\n            }]\n          })\n        })\n      })]\n    })\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  }\n});\nexport default CategoryChart;\n_NativeWindStyleSheet.create({\n  styles: {\n    \"container\": {\n      \"width\": \"100%\"\n    },\n    \"container@0\": {\n      \"maxWidth\": 640\n    },\n    \"container@1\": {\n      \"maxWidth\": 768\n    },\n    \"container@2\": {\n      \"maxWidth\": 1024\n    },\n    \"container@3\": {\n      \"maxWidth\": 1280\n    },\n    \"container@4\": {\n      \"maxWidth\": 1536\n    },\n    \"shadow@0\": {\n      \"elevation\": 3,\n      \"shadowColor\": \"rgba(0, 0, 0, 0.1)\"\n    },\n    \"shadow@1\": {\n      \"shadowOffset\": {\n        \"width\": 0,\n        \"height\": 2\n      },\n      \"shadowRadius\": 6,\n      \"shadowColor\": \"rgba(0, 0, 0, 0.1)\",\n      \"shadowOpacity\": 1\n    },\n    \"shadow@2\": {\n      \"shadowOffset\": {\n        \"width\": 0,\n        \"height\": 2\n      },\n      \"shadowRadius\": 6,\n      \"shadowColor\": \"rgba(0, 0, 0, 0.1)\",\n      \"shadowOpacity\": 1\n    },\n    \"m-4\": {\n      \"marginTop\": 16,\n      \"marginRight\": 16,\n      \"marginBottom\": 16,\n      \"marginLeft\": 16\n    },\n    \"flex\": {\n      \"display\": \"flex\"\n    },\n    \"flex-row\": {\n      \"flexDirection\": \"row\"\n    },\n    \"italic\": {\n      \"fontStyle\": \"italic\"\n    }\n  },\n  atRules: {\n    \"container\": [[[\"media\", \"(min-width: 640px)\"]], [[\"media\", \"(min-width: 768px)\"]], [[\"media\", \"(min-width: 1024px)\"]], [[\"media\", \"(min-width: 1280px)\"]], [[\"media\", \"(min-width: 1536px)\"]]],\n    \"shadow\": [[[\"media\", \"android\"]], [[\"media\", \"ios\"]], [[\"media\", \"web\"]]]\n  },\n  topics: {\n    \"container\": [\"width\"]\n  }\n});","map":{"version":3,"names":["React","useContext","useEffect","useState","View","ScrollView","StyleSheet","VictoryPie","axios","BASE_URL","AuthContext","jsx","_jsx","jsxs","_jsxs","CategoryChart","_ref","email","_useContext","userInfo","_useState","_useState2","_slicedToArray","tripData","setTripData","defaultGraphicData","y","fetchTripData","_ref2","_asyncToGenerator","response","get","data","error","console","apply","arguments","chartData","map","trip","x","city","_useState3","_useState4","selectedCategory","setSelectedCategory","SIZES","width","colorScales","children","style","styles","container","_StyledComponent","className","component","animate","duration","easing","labels","_ref3","datum","radius","_ref4","innerRadius","labelRadius","_ref5","fill","fontSize","fontStyle","parent","_objectSpread","shadow","height","colorScale","events","target","eventHandlers","onPress","mutation","props","categoryName","index","create","justifyContent","alignItems","_NativeWindStyleSheet","atRules","topics"],"sources":["C:/Users/bhand/OneDrive/Desktop/Sahaj Yatri/Frontend/src/screens/BudgetScreen/CategoryChart.jsx"],"sourcesContent":["//import liraries\r\nimport React, { useContext, useEffect, useState } from \"react\";\r\nimport { View, ScrollView, StyleSheet } from \"react-native\";\r\nimport { VictoryPie } from \"victory-native\";\r\nimport axios from \"axios\";\r\nimport { BASE_URL } from \"../utils/config\";\r\nimport { AuthContext } from \"../../Context/AuthContext\";\r\n//refernces for pie chart doc https://commerce.nearform.com/open-source/victory/docs/victory-pie\r\n// create a component\r\nconst CategoryChart = ({ email }) => {\r\n  const { userInfo } = useContext(AuthContext);\r\n  const [tripData, setTripData] = useState([]);\r\n  // const [graphicData, setGraphicData] = useState(defaultGraphicData); //for making animation in vector pie\r\n  const defaultGraphicData = [{ y: 0 }, { y: 0 }, { y: 100 }]; // Data used to make the animate prop work\r\n\r\n  useEffect(() => {\r\n    fetchTripData();\r\n  }, []);\r\n\r\n  const fetchTripData = async () => {\r\n    try {\r\n      const response = await axios.get(\r\n        `${BASE_URL}BudgetTrip/user/${userInfo.email}`\r\n      );\r\n      setTripData(response.data);\r\n    } catch (error) {\r\n      console.error(\"Error fetching trip data:\", error);\r\n    }\r\n  };\r\n\r\n  // Calculate chart data from trip data\r\n  const chartData = tripData.map((trip) => ({\r\n    x: trip.city,\r\n    y: 20,\r\n    // Set a default value for each trip\r\n  }));\r\n\r\n  // State for the selected category\r\n  const [selectedCategory, setSelectedCategory] = useState(null);\r\n\r\n  // Sample size object\r\n  const SIZES = {\r\n    width: 470, // Adjust the width as needed\r\n  };\r\n\r\n  // Sample color scale\r\n  const colorScales = [\r\n    \"#7DB9DE\", // Sky Blue\r\n    \"#FECB52\", // Yellow\r\n    \"#83D3C9\", // Turquoise\r\n    \"#F58A5E\", // Coral\r\n    \"#BFD7EA\", // Light Blue\r\n    \"#F4C7AB\", // Peach\r\n    \"#D2FFF7\", // Light Cyan\r\n    \"#E4FFCF\", // Pale Green\r\n    \"#FFD3D3\", // Pale Pink\r\n    \"#EAD4FF\", // Lavender\r\n    \"#A5FFD6\", // Mint Green\r\n    \"#FFD700\", // Gold\r\n    \"#FF7F50\", // Salmon\r\n    \"#ADFF2F\", // Green Yellow\r\n    \"#87CEEB\", // Sky Blue\r\n    \"#FF69B4\", // Hot Pink\r\n    \"#20B2AA\", // Light Sea Green\r\n    \"#FFA07A\", // Light Salmon\r\n    \"#00CED1\", // Dark Turquoise\r\n    \"#FF6347\", // Tomato\r\n  ];\r\n\r\n  return (\r\n    <ScrollView>\r\n      <View style={styles.container}>\r\n        <View className=\"flex flex-row \"></View>\r\n        {/* date of the month with year  */}\r\n        {/* horizontal line */}\r\n        <View className=\" m-4\">\r\n          <View>\r\n            <VictoryPie\r\n              animate={{ duration: 4000, easing: \"exp\" }}\r\n              data={chartData}\r\n              labels={({ datum }) => `${datum.x}`} // for making the chart dunot shape\r\n              radius={({ datum }) =>\r\n                selectedCategory === datum.x\r\n                  ? SIZES.width * 0.4\r\n                  : SIZES.width * 0.4 - 10\r\n              }\r\n              innerRadius={70}\r\n              labelRadius={(\r\n                { innerRadius } //for adding radius to the chart\r\n              ) => (SIZES.width * 0.4 + innerRadius) / 2.5}\r\n              style={{\r\n                labels: {\r\n                  fill: \"black\",\r\n                  fontSize: 12,\r\n                  fontStyle: \"italic\",\r\n                },\r\n                parent: {\r\n                  ...styles.shadow,\r\n                },\r\n              }}\r\n              width={SIZES.width}\r\n              height={SIZES.width}\r\n              colorScale={colorScales}\r\n              events={[\r\n                {\r\n                  target: \"data\",\r\n                  eventHandlers: {\r\n                    onPress: () => {\r\n                      return [\r\n                        {\r\n                          target: \"labels\",\r\n                          mutation: (props) => {\r\n                            const categoryName = chartData[props.index].x;\r\n                            setSelectedCategory(categoryName);\r\n                          },\r\n                        },\r\n                      ];\r\n                    },\r\n                  },\r\n                },\r\n              ]}\r\n            />\r\n          </View>\r\n        </View>\r\n      </View>\r\n    </ScrollView>\r\n  );\r\n};\r\n\r\n// define your styles\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n});\r\n\r\n//make this component available to the app\r\nexport default CategoryChart;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}